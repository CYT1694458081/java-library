webpackJsonp([7],{"/Ub/":function(t,e){},"8taU":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("NHnr"),n={data:function(){return{book:{book_id:"",name:"",content:"",type:"",num:""},search:"",list:[],total:null,currentPage1:1,dialogTableVisible:!1,pageSize:5,formLabelWidth:"80px",userdate:[],loading:!0}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.list=[],Object(i.postRequest)("/api/public/getAllBook",{}).then(function(e){200===e.data.code?(t.list=e.data.data,t.craetep(),t.loading=!1):-1===e.data.code&&alert(e.data.msg)}).catch(function(t){})},craetep:function(){this.userdate=[];for(var t=(this.currentPage1-1)*this.pageSize,e=this.currentPage1*this.pageSize;t<e;t++)this.list[t]&&this.userdate.push(this.list[t]);this.total=this.list.length},handleEdit:function(t,e){this.dialogTableVisible=!0,this.user.id=e.id,this.user.name=e.name,this.user.lv=e.lv,this.user.img=e.img,this.user.type=e.type,this.user.ability=e.ability,this.user.others=e.others,console.log(t,e)},borrow:function(t,e){var a=this,n={borrow_id:0,user_id:JSON.parse(window.localStorage.getItem("user")).user_id,book_id:e.book_id,date:""};Object(i.postRequest)("/api/public/borrowBook/",n).then(function(t){console.log(t),200===t.data.code?(a.$message(""+t.data.msg),a.fetchData()):-1===t.data.code&&alert(""+t.data.msg)}).catch(function(t){console.log(t)}),this.dialogTableVisible=!1},find:function(){var t=this;this.loading=!0,this.currentPage1=1,Object(i.postRequest)("api/public/searchBook",{searchParam:this.search}).then(function(e){200===e.data.code?(t.list=e.data.data,t.craetep(),t.loading=!1):-1===e.data.code&&alert(""+e.data.msg)}).catch(function(t){console.log(t)})},handleSizeChange1:function(t){this.pageSize=t,this.handleCurrentChange1(this.currentPage1)},handleCurrentChange1:function(t){this.currentPage1=t,this.currentChangePage(this.list,t)},currentChangePage:function(t,e){var a=(e-1)*this.pageSize,i=e*this.pageSize;for(this.userdate=[];a<i;a++)t[a]&&this.userdate.push(t[a])}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[[i("div",{staticClass:"tb"},[i("el-input",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"},attrs:{placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.find},slot:"append"},[t._v("查找")])],1)],1)],t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"z-index":"-1"},attrs:{data:t.userdate}},[i("el-table-column",{attrs:{label:"图书序号",prop:"book_id",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"外观",align:"center"}},[[i("el-image",{staticStyle:{width:"65px",height:"65px"},attrs:{src:a("uwaW")}})]],2),t._v(" "),i("el-table-column",{attrs:{label:"书名",prop:"name",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"类型",prop:"type",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"简介",prop:"content",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"数量",prop:"num",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"选项",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",type:"success",plain:"",round:""},on:{click:function(a){return t.borrow(e.$index,e.row)}}},[t._v("借阅")])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"page-sizes":[10,20,50,100],total:t.total,"current-page":t.currentPage1},on:{"size-change":t.handleSizeChange1,"current-change":t.handleCurrentChange1}})],1),t._v(" "),i("img",{staticStyle:{float:"right","margin-top":"65vh","z-index":"9999"},attrs:{src:a("KqsI"),height:"80px",width:"230px"}})],2)},staticRenderFns:[]};var r=a("VU/8")(n,s,!1,function(t){a("/Ub/")},"data-v-03cfe731",null);e.default=r.exports},uwaW:function(t,e,a){t.exports=a.p+"static/img/book.0d26e66.jpg"}});
//# sourceMappingURL=7.f7170a8083ac4dc8bb10.js.map