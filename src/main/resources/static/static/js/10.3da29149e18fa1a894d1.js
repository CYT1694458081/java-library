webpackJsonp([10],{"2PZg":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("NHnr"),i={data:function(){return{dialogTableVisible1:!0,dialogTableVisible2:!1,dialogTableVisible3:!1,dialogTableVisible11:!0,dialogTableVisible22:!1,dialogTableVisible33:!1,total:null,currentPage1:1,pageSize:7,formLabelWidth:"120px",LogNum:{user_id:"",user_name:"",borrowLog_um:"",back_num:""},LogList:{log_id:"",user_id:"",user_name:"",book_id:"",book_name:"",date:""},userid:"",username:"",list:[],list2:[],list3:[],search:"",search2:"",search3:"",userdate:[]}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.list=[],Object(l.postRequest)("/api/public/getAllUserLogNum",{}).then(function(t){200===t.data.code?(e.list=t.data.data,e.craetep()):-1===t.data.code&&alert(t.data.msg)}).catch(function(e){})},craetep:function(){this.userdate=[];for(var e=(this.currentPage1-1)*this.pageSize,t=this.currentPage1*this.pageSize;e<t;e++)this.list[e]&&this.userdate.push(this.list[e]);this.total=this.list.length},handleEdit:function(e,t){var a=this;this.dialogTableVisible1=!1,this.dialogTableVisible2=!0,this.dialogTableVisible11=!1,this.dialogTableVisible22=!0,this.username=t.user_name,Object(l.postRequest)("api/public/getBorrowListByName",{name:t.user_name}).then(function(e){200===e.data.code?a.list2=e.data.data:e.data.code}).catch(function(e){console.log(e)})},handleEdit2:function(e,t){var a=this;this.dialogTableVisible1=!1,this.dialogTableVisible3=!0,this.dialogTableVisible11=!1,this.dialogTableVisible33=!0,this.username=t.user_name,Object(l.postRequest)("api/public/getBackListByName",{name:t.user_name}).then(function(e){200===e.data.code?a.list3=e.data.data:e.data.code}).catch(function(e){console.log(e)})},reset:function(){this.dialogTableVisible2=!1,this.dialogTableVisible3=!1,this.dialogTableVisible1=!0,this.dialogTableVisible22=!1,this.dialogTableVisible33=!1,this.dialogTableVisible11=!0,this.list2=[],this.userdate2=[],this.fetchData()},find:function(){var e=this;this.currentPage1=1,Object(l.postRequest)("api/public/searchUserLogNumByKey",{key:this.search}).then(function(t){200===t.data.code?(e.list=[],e.list=t.data.data,e.craetep(),e.$message(""+t.data.msg)):-1===t.data.code&&alert(""+t.data.msg)}).catch(function(e){console.log(e)})},findBorrow:function(){var e=this;this.currentPage2=1,Object(l.postRequest)("api/public/searchUserBorrowListByBook",{user:this.username,book:this.search2}).then(function(t){200===t.data.code?(e.list2=[],e.list2=t.data.data):-1===t.data.code&&alert(""+t.data.msg)}).catch(function(e){console.log(e)})},findBack:function(){var e=this;this.currentPage3=1,Object(l.postRequest)("api/public/searchUserBackListByBook",{user:this.username,book:this.search3}).then(function(t){200===t.data.code?(e.list3=[],e.list3=t.data.data):-1===t.data.code&&alert(""+t.data.msg)}).catch(function(e){console.log(e)})},deletep:function(e,t){this.$message.error("权限不够，无法删除"),console.log(e,t)},handleSizeChange1:function(e){this.pageSize=e,this.handleCurrentChange1(this.currentPage1)},handleCurrentChange1:function(e){this.currentPage1=e,this.currentChangePage(this.list,e)},currentChangePage:function(e,t){var a=(t-1)*this.pageSize,l=t*this.pageSize;for(this.userdate=[];a<l;a++)e[a]&&this.userdate.push(e[a])}}},s={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[[e.dialogTableVisible11?l("div",{staticClass:"tb"},[l("el-input",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"},attrs:{placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[l("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.find},slot:"append"},[e._v("查找")])],1)],1):e._e(),e._v(" "),e.dialogTableVisible22?l("div",{staticClass:"tb"},[l("el-input",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"},attrs:{placeholder:"输入关键字搜索"},model:{value:e.search2,callback:function(t){e.search2=t},expression:"search2"}},[l("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.findBorrow},slot:"append"},[e._v("查找")])],1)],1):e._e(),e._v(" "),e.dialogTableVisible33?l("div",{staticClass:"tb"},[l("el-input",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"},attrs:{placeholder:"输入关键字搜索"},model:{value:e.search3,callback:function(t){e.search3=t},expression:"search3"}},[l("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.findBack},slot:"append"},[e._v("查找")])],1)],1):e._e()],e._v(" "),e.dialogTableVisible1?l("div",[l("el-table",{staticStyle:{width:"85%"},attrs:{data:e.userdate}},[l("el-table-column",{attrs:{align:"center",label:"用户ID",prop:"user_id"}}),e._v(" "),l("el-table-column",{attrs:{label:"头像",align:"center"}},[[l("el-image",{staticStyle:{width:"65px",height:"65px"},attrs:{src:a("F1k0")}})]],2),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"用户名",prop:"user_name"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"借阅记录数",prop:"borrowLog_num"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"归还记录数",prop:"backLog_num"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"选项"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",plain:"",round:""},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("查看借阅详细")]),e._v(" "),l("el-button",{attrs:{type:"success",plain:"",round:""},on:{click:function(a){return e.handleEdit2(t.$index,t.row)}}},[e._v("查看归还详细")])]}}],null,!1,4130850493)})],1),e._v(" "),l("div",{staticClass:"pagination"},[l("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,"page-sizes":[10,20,50,100],total:e.total,"current-page":e.currentPage1},on:{"size-change":e.handleSizeChange1,"current-change":e.handleCurrentChange1}})],1)],1):e._e(),e._v(" "),e.dialogTableVisible2?l("div",[l("el-table",{staticStyle:{width:"80%"},attrs:{height:"83vh",data:e.list2}},[l("el-table-column",{attrs:{align:"center",label:"记录"}},[[l("el-image",{staticStyle:{width:"65px",height:"65px"},attrs:{src:a("rK8b")}})]],2),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"记录序号",prop:"log_id"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"书名",prop:"book_name"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"借阅时间",prop:"date"}}),e._v(" "),l("el-table-column",{attrs:{align:"right"}},[l("template",{slot:"header"},[l("el-button",{attrs:{slot:"append"},on:{click:e.reset},slot:"append"},[e._v(" 返回")])],1)],2)],1)],1):e._e(),e._v(" "),e.dialogTableVisible3?l("div",[l("el-table",{staticStyle:{width:"80%"},attrs:{height:"83vh",data:e.list3}},[l("el-table-column",{attrs:{align:"center",label:"记录"}},[[l("el-image",{staticStyle:{width:"65px",height:"65px"},attrs:{src:a("rK8b")}})]],2),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"记录序号",prop:"log_id"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"书名",prop:"book_name"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"归还时间",prop:"date"}}),e._v(" "),l("el-table-column",{attrs:{align:"right"}},[l("template",{slot:"header"},[l("el-button",{attrs:{slot:"append"},on:{click:e.reset},slot:"append"},[e._v(" 返回")])],1)],2)],1)],1):e._e()],2)},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(e){a("TX41")},"data-v-58389490",null);t.default=n.exports},TX41:function(e,t){}});
//# sourceMappingURL=10.3da29149e18fa1a894d1.js.map