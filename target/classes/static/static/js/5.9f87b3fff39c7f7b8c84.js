webpackJsonp([5],{HE8R:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("NHnr"),l={data:function(){return{book:{book_id:0,name:"",content:"",type:"",num:0},search:"",list:[],total:null,currentPage1:1,dialogTableVisible:!1,dialogTableVisible2:!1,pageSize:6,formLabelWidth:"80px",userdate:[]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.list=[],Object(a.postRequest)("/api/public/getAllBook",{}).then(function(e){200===e.data.code?(t.list=e.data.data,t.craetep()):-1===e.data.code&&alert(e.data.msg)}).catch(function(t){})},craetep:function(){this.userdate=[];for(var t=(this.currentPage1-1)*this.pageSize,e=this.currentPage1*this.pageSize;t<e;t++)this.list[t]&&this.userdate.push(this.list[t]);this.total=this.list.length},handleEdit:function(t,e){this.dialogTableVisible=!0,this.book.book_id=e.book_id,this.book.name=e.name,this.book.content=e.content,this.book.type=e.type,this.book.num=e.num},find:function(){var t=this;console.log(this.search),this.currentPage1=1,Object(a.postRequest)("api/public/searchBook",{searchParam:this.search}).then(function(e){200===e.data.code?(t.list=[],t.list=e.data.data,t.craetep(),t.$message(""+e.data.msg)):-1===e.data.code&&alert(""+e.data.msg)}).catch(function(t){console.log(t)})},upBook:function(){var t=this,e={book_id:this.book.book_id,name:this.book.name,content:this.book.content,type:this.book.type,num:this.book.num};Object(a.postRequest)("/api/public/upBook/",e).then(function(e){console.log(e),200===e.data.code?(t.$message(""+e.data.msg),t.fetchData()):-1===e.data.code&&alert(""+e.data.msg)}).catch(function(t){console.log(t)}),this.dialogTableVisible=!1},handleDelete:function(t,e){var o=this;Object(a.postRequest)("/api/public/delBook/",{del:e.book_id}).then(function(t){console.log(t),200===t.data.code?(o.$message(""+t.data.msg),o.fetchData()):alert(""+t.data.msg)}).catch(function(t){console.log(t)})},addbook1:function(){this.dialogTableVisible2=!0,this.book.book_id=0,this.book.name="",this.book.type="",this.book.content="",this.book.num=0},addBook:function(){var t=this;if(""!==this.book.name&&""!==this.book.type&&""!==this.book.content&&0!==this.book.num){this.dialogTableVisible2=!1;var e={book_id:this.book.book_id,name:this.book.name,content:this.book.content,type:this.book.type,num:this.book.num};Object(a.postRequest)("/api/public/addBook",e).then(function(e){200===e.data.code?(t.$message({message:""+e.data.msg,type:"success"}),t.fetchData()):alert(""+e.data.msg)}).catch(function(t){console.log(t)})}else alert("关键信息不能为空")},handleSizeChange1:function(t){this.pageSize=t,this.handleCurrentChange1(this.currentPage1)},handleCurrentChange1:function(t){this.currentPage1=t,this.currentChangePage(this.list,t)},currentChangePage:function(t,e){var o=(e-1)*this.pageSize,a=e*this.pageSize;for(this.userdate=[];o<a;o++)t[o]&&this.userdate.push(t[o])}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[[a("div",{staticClass:"tb"},[a("el-input",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"},attrs:{placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.find},slot:"append"},[t._v("查找")]),a("el-button",{attrs:{slot:"append"},on:{click:t.addbook1},slot:"append"},[t._v("添加")])],1)],1)],t._v(" "),a("el-table",{staticStyle:{width:"85%"},attrs:{border:"",data:t.userdate}},[a("el-table-column",{attrs:{label:"图书序号",prop:"book_id",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"外观",prop:"img",align:"center"}},[[a("el-image",{staticStyle:{width:"65px",height:"65px"},attrs:{src:o("uwaW")}})]],2),t._v(" "),a("el-table-column",{attrs:{label:"书名",prop:"name",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"类型",prop:"type",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"简介",prop:"content",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"数量",prop:"num",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary",plain:"",round:""},on:{click:function(o){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",plain:"",round:""},on:{click:function(o){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"page-sizes":[10,20,50,100],total:t.total,"current-page":t.currentPage1},on:{"size-change":t.handleSizeChange1,"current-change":t.handleCurrentChange1}})],1),t._v(" "),a("el-dialog",{attrs:{title:"修改图书信息",visible:t.dialogTableVisible,width:"30%"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-form",{attrs:{model:t.user}},[a("el-form-item",{attrs:{label:"图书序号","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:t.book.book_id,callback:function(e){t.$set(t.book,"book_id",e)},expression:"book.book_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"书名","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.book.name,callback:function(e){t.$set(t.book,"name",e)},expression:"book.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.book.type,callback:function(e){t.$set(t.book,"type",e)},expression:"book.type"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"简介","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.book.content,callback:function(e){t.$set(t.book,"content",e)},expression:"book.content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数量","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.book.num,callback:function(e){t.$set(t.book,"num",e)},expression:"book.num"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.upBook}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加图书",visible:t.dialogTableVisible2,width:"30%"},on:{"update:visible":function(e){t.dialogTableVisible2=e}}},[a("el-form",{attrs:{model:t.user}},[a("el-form-item",{attrs:{label:"书名","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.book.name,callback:function(e){t.$set(t.book,"name",e)},expression:"book.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.book.type,callback:function(e){t.$set(t.book,"type",e)},expression:"book.type"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"简介","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.book.content,callback:function(e){t.$set(t.book,"content",e)},expression:"book.content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数量","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.book.num,callback:function(e){t.$set(t.book,"num",e)},expression:"book.num"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addBook}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogTableVisible2=!1}}},[t._v("取 消")])],1)],1)],2)},staticRenderFns:[]};var n=o("VU/8")(l,i,!1,function(t){o("NjK0")},"data-v-8e09bd5a",null);e.default=n.exports},NjK0:function(t,e){},uwaW:function(t,e,o){t.exports=o.p+"static/img/book.0d26e66.jpg"}});
//# sourceMappingURL=5.9f87b3fff39c7f7b8c84.js.map